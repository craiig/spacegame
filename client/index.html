<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="/events.js"></script>
<script src="/network.js"></script>
<script src="/world.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
  var lastPing = 0;

  //var socket = io.connect('http://192.168.1.105:59473');
  var socket = io.connect(location.hostname); //better way
  var world = new World(socket);

  //example: send a network obj rpc for testing
  world.socket.emit("network_objrpc", {objid:1,eventname:'attach_to_ship'});

//send ping back immediately since we'll block processing and we can use it to measure how long this takes
  this.world.socket.emit('ping', { time: (new Date()).getTime() });

//setup simple ping function
  $(document).ready( function(){ //fire when the document dom is ready
      socket.on('ping', function(data){
        //console.log("ping response:");
        //console.log(data);
        var now = (new Date()).getTime();
        $("#ping").html(now - data.time);
        //console.log("now: " + now + " received: " + data.time)
        lastPing = now;
        //this.emit('ping', { time: now });
      })
  })

//setup a keypress handler
$(document).bind('keydown', function(e){
  if(e.which == 38){
    //up key
    socket.emit('ship_accelerate_down');
    //console.log("down")
  } else if(e.which == 40){
    //down key
  } else if(e.which == 37){
    //left
    socket.emit('ship_accelerate_left');
  } else if(e.which == 39){
    //right
    socket.emit('ship_accelerate_right');
  }
  //console.log(e.which);
})

$(document).bind('keyup', function(e){
  if(e.which == 38){
    //up key
    socket.emit('ship_accelerate_up', "0")
    //console.log("up")
  } else if(e.which == 40){
    //down key
  } else if(e.which == 37){
    //left
  } else if(e.which == 39){
    //right
  }
  //console.log(e.which);
})

</script> 

Ping: <span id="ping">xx</span> ms

Ships: <ul id="shiplist"></ul>